<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>system\Device.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AnimationManager.html">AnimationManager</a></li>
            
                <li><a href="../classes/AssetLoader.html">AssetLoader</a></li>
            
                <li><a href="../classes/BaseTexture.html">BaseTexture</a></li>
            
                <li><a href="../classes/BitmapFontLoader.html">BitmapFontLoader</a></li>
            
                <li><a href="../classes/BitmapText.html">BitmapText</a></li>
            
                <li><a href="../classes/Button.html">Button</a></li>
            
                <li><a href="../classes/Camera.html">Camera</a></li>
            
                <li><a href="../classes/Canvas.html">Canvas</a></li>
            
                <li><a href="../classes/CanvasGraphics.html">CanvasGraphics</a></li>
            
                <li><a href="../classes/CanvasRenderer.html">CanvasRenderer</a></li>
            
                <li><a href="../classes/Circle.html">Circle</a></li>
            
                <li><a href="../classes/Color.html">Color</a></li>
            
                <li><a href="../classes/CustomRenderable.html">CustomRenderable</a></li>
            
                <li><a href="../classes/DebugUtils.html">DebugUtils</a></li>
            
                <li><a href="../classes/DisplayObject.html">DisplayObject</a></li>
            
                <li><a href="../classes/DisplayObjectContainer.html">DisplayObjectContainer</a></li>
            
                <li><a href="../classes/Ellipse.html">Ellipse</a></li>
            
                <li><a href="../classes/EventTarget.html">EventTarget</a></li>
            
                <li><a href="../classes/Frame.html">Frame</a></li>
            
                <li><a href="../classes/FrameData.html">FrameData</a></li>
            
                <li><a href="../classes/Graphics.html">Graphics</a></li>
            
                <li><a href="../classes/ImageLoader.html">ImageLoader</a></li>
            
                <li><a href="../classes/JsonLoader.html">JsonLoader</a></li>
            
                <li><a href="../classes/MovieClip.html">MovieClip</a></li>
            
                <li><a href="../classes/Phaser.Animation.html">Phaser.Animation</a></li>
            
                <li><a href="../classes/Point.html">Point</a></li>
            
                <li><a href="../classes/Polygon.html">Polygon</a></li>
            
                <li><a href="../classes/PolyK._convex.html">PolyK._convex</a></li>
            
                <li><a href="../classes/PolyK._PointInTriangle.html">PolyK._PointInTriangle</a></li>
            
                <li><a href="../classes/PolyK.AjaxRequest.html">PolyK.AjaxRequest</a></li>
            
                <li><a href="../classes/PolyK.InteractionData.html">PolyK.InteractionData</a></li>
            
                <li><a href="../classes/PolyK.InteractionManager.html">PolyK.InteractionManager</a></li>
            
                <li><a href="../classes/Rectangle.html">Rectangle</a></li>
            
                <li><a href="../classes/RenderTexture.html">RenderTexture</a></li>
            
                <li><a href="../classes/Sound.html">Sound</a></li>
            
                <li><a href="../classes/SoundManager.html">SoundManager</a></li>
            
                <li><a href="../classes/Spine.html">Spine</a></li>
            
                <li><a href="../classes/Sprite.html">Sprite</a></li>
            
                <li><a href="../classes/SpriteSheetLoader.html">SpriteSheetLoader</a></li>
            
                <li><a href="../classes/Stage.html">Stage</a></li>
            
                <li><a href="../classes/Text.html">Text</a></li>
            
                <li><a href="../classes/Texture.html">Texture</a></li>
            
                <li><a href="../classes/TilingSprite.html">TilingSprite</a></li>
            
                <li><a href="../classes/Time.html">Time</a></li>
            
                <li><a href="../classes/Utils.html">Utils</a></li>
            
                <li><a href="../classes/WebGLBatch.html">WebGLBatch</a></li>
            
                <li><a href="../classes/WebGLRenderer.html">WebGLRenderer</a></li>
            
                <li><a href="../classes/World.html">World</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Phaser.html">Phaser</a></li>
            
                <li><a href="../modules/Phaser.Animation.html">Phaser.Animation</a></li>
            
                <li><a href="../modules/Phaser.Animation.FrameData.html">Phaser.Animation.FrameData</a></li>
            
                <li><a href="../modules/Phaser.Button.html">Phaser.Button</a></li>
            
                <li><a href="../modules/Phaser.Camera.html">Phaser.Camera</a></li>
            
                <li><a href="../modules/Phaser.Canvas.html">Phaser.Canvas</a></li>
            
                <li><a href="../modules/Phaser.Stage.html">Phaser.Stage</a></li>
            
                <li><a href="../modules/Phaser.Time.html">Phaser.Time</a></li>
            
                <li><a href="../modules/Phaser.Utils.html">Phaser.Utils</a></li>
            
                <li><a href="../modules/Phaser.World.html">Phaser.World</a></li>
            
                <li><a href="../modules/PIXI.html">PIXI</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: system\Device.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
* Phaser - Device
*
* Detects device support capabilities. Using some elements from System.js by MrDoob and Modernizr
* https://github.com/Modernizr/Modernizr/blob/master/feature-detects/audio.js
*/

Phaser.Device = function () {

    /**
    * An optional &#x27;fix&#x27; for the horrendous Android stock browser bug
    * https://code.google.com/p/android/issues/detail?id=39247
    * @type {boolean}
    */
    this.patchAndroidClearRectBug = false;

    //  Operating System

    /**
    * Is running desktop?
    * @type {boolean}
    */
    this.desktop = false;

    /**
    * Is running on iOS?
    * @type {boolean}
    */
    this.iOS = false;

    /**
    * Is running on android?
    * @type {boolean}
    */
    this.android = false;

    /**
    * Is running on chromeOS?
    * @type {boolean}
    */
    this.chromeOS = false;

    /**
    * Is running on linux?
    * @type {boolean}
    */
    this.linux = false;

    /**
    * Is running on maxOS?
    * @type {boolean}
    */
    this.macOS = false;

    /**
    * Is running on windows?
    * @type {boolean}
    */
    this.windows = false;

    //  Features

    /**
    * Is canvas available?
    * @type {boolean}
    */
    this.canvas = false;

    /**
    * Is file available?
    * @type {boolean}
    */
    this.file = false;

    /**
    * Is fileSystem available?
    * @type {boolean}
    */
    this.fileSystem = false;

    /**
    * Is localStorage available?
    * @type {boolean}
    */
    this.localStorage = false;

    /**
    * Is webGL available?
    * @type {boolean}
    */
    this.webGL = false;

    /**
    * Is worker available?
    * @type {boolean}
    */
    this.worker = false;

    /**
    * Is touch available?
    * @type {boolean}
    */
    this.touch = false;

    /**
    * Is mspointer available?
    * @type {boolean}
    */
    this.mspointer = false;

    /**
    * Is css3D available?
    * @type {boolean}
    */
    this.css3D = false;

    /**
    * Is Pointer Lock available?
    * @type {boolean}
    */
    this.pointerLock = false;

    //  Browser

    /**
    * Is running in arora?
    * @type {boolean}
    */
    this.arora = false;

    /**
    * Is running in chrome?
    * @type {boolean}
    */
    this.chrome = false;

    /**
    * Is running in epiphany?
    * @type {boolean}
    */
    this.epiphany = false;

    /**
    * Is running in firefox?
    * @type {boolean}
    */
    this.firefox = false;

    /**
    * Is running in ie?
    * @type {boolean}
    */
    this.ie = false;

    /**
    * Version of ie?
    * @type Number
    */
    this.ieVersion = 0;

    /**
    * Is running in mobileSafari?
    * @type {boolean}
    */
    this.mobileSafari = false;

    /**
    * Is running in midori?
    * @type {boolean}
    */
    this.midori = false;

    /**
    * Is running in opera?
    * @type {boolean}
    */
    this.opera = false;

    /**
    * Is running in safari?
    * @type {boolean}
    */
    this.safari = false;
    this.webApp = false;

    //  Audio

    /**
    * Are Audio tags available?
    * @type {boolean}
    */
    this.audioData = false;

    /**
    * Is the WebAudio API available?
    * @type {boolean}
    */
    this.webAudio = false;

    /**
    * Can this device play ogg files?
    * @type {boolean}
    */
    this.ogg = false;

    /**
    * Can this device play opus files?
    * @type {boolean}
    */
    this.opus = false;

    /**
    * Can this device play mp3 files?
    * @type {boolean}
    */
    this.mp3 = false;

    /**
    * Can this device play wav files?
    * @type {boolean}
    */
    this.wav = false;
    /**
    * Can this device play m4a files?
    * @type {boolean}
    */
    this.m4a = false;

    /**
    * Can this device play webm files?
    * @type {boolean}
    */
    this.webm = false;

    //  Device

    /**
    * Is running on iPhone?
    * @type {boolean}
    */
    this.iPhone = false;

    /**
    * Is running on iPhone4?
    * @type {boolean}
    */
    this.iPhone4 = false;

    /**
    * Is running on iPad?
    * @type {boolean}
    */
    this.iPad = false;

    /**
    * PixelRatio of the host device?
    * @type Number
    */
    this.pixelRatio = 0;

    //  Run the checks
    this._checkAudio();
    this._checkBrowser();
    this._checkCSS3D();
    this._checkDevice();
    this._checkFeatures();
    this._checkOS();
    
};

Phaser.Device.prototype = {

    /**
    * Check which OS is game running on.
    * @private
    */
    _checkOS: function () {

        var ua = navigator.userAgent;

        if (/Android/.test(ua)) {
            this.android = true;
        } else if (/CrOS/.test(ua)) {
            this.chromeOS = true;
        } else if (/iP[ao]d|iPhone/i.test(ua)) {
            this.iOS = true;
        } else if (/Linux/.test(ua)) {
            this.linux = true;
        } else if (/Mac OS/.test(ua)) {
            this.macOS = true;
        } else if (/Windows/.test(ua)) {
            this.windows = true;
        }

        if (this.windows || this.macOS || this.linux) {
            this.desktop = true;
        }

    },

    /**
    * Check HTML5 features of the host environment.
    * @private
    */
    _checkFeatures: function () {

        this.canvas = !!window[&#x27;CanvasRenderingContext2D&#x27;];

        try {
            this.localStorage = !!localStorage.getItem;
        } catch (error) {
            this.localStorage = false;
        }

        this.file = !!window[&#x27;File&#x27;] &amp;&amp; !!window[&#x27;FileReader&#x27;] &amp;&amp; !!window[&#x27;FileList&#x27;] &amp;&amp; !!window[&#x27;Blob&#x27;];
        this.fileSystem = !!window[&#x27;requestFileSystem&#x27;];
        this.webGL = ( function () { try { return !! window.WebGLRenderingContext &amp;&amp; !! document.createElement( &#x27;canvas&#x27; ).getContext( &#x27;experimental-webgl&#x27; ); } catch( e ) { return false; } } )();
        // this.webGL = !!window[&#x27;WebGLRenderingContext&#x27;];
        this.worker = !!window[&#x27;Worker&#x27;];
        
        if (&#x27;ontouchstart&#x27; in document.documentElement || window.navigator.msPointerEnabled) {
            this.touch = true;
        }

        if (window.navigator.msPointerEnabled) {
            this.mspointer = true;
        }
        
        this.pointerLock = &#x27;pointerLockElement&#x27; in document || &#x27;mozPointerLockElement&#x27; in document || &#x27;webkitPointerLockElement&#x27; in document;

    },

    /**
    * Check what browser is game running in.
    * @private
    */
    _checkBrowser: function () {

        var ua = navigator.userAgent;

        if (/Arora/.test(ua)) {
            this.arora = true;
        } else if (/Chrome/.test(ua)) {
            this.chrome = true;
        } else if (/Epiphany/.test(ua)) {
            this.epiphany = true;
        } else if (/Firefox/.test(ua)) {
            this.firefox = true;
        } else if (/Mobile Safari/.test(ua)) {
            this.mobileSafari = true;
        } else if (/MSIE (\d+\.\d+);/.test(ua)) {
            this.ie = true;
            this.ieVersion = parseInt(RegExp.$1);
        } else if (/Midori/.test(ua)) {
            this.midori = true;
        } else if (/Opera/.test(ua)) {
            this.opera = true;
        } else if (/Safari/.test(ua)) {
            this.safari = true;
        }

        // WebApp mode in iOS
        if (navigator[&#x27;standalone&#x27;]) {
            this.webApp = true;
        }

    },

    /**
    * Check audio support.
    * @private
    */
    _checkAudio: function () {

        this.audioData = !!(window[&#x27;Audio&#x27;]);
        this.webAudio = !!(window[&#x27;webkitAudioContext&#x27;] || window[&#x27;AudioContext&#x27;]);
        var audioElement = document.createElement(&#x27;audio&#x27;);
        var result = false;

        try {
            if (result = !!audioElement.canPlayType) {
                
                if (audioElement.canPlayType(&#x27;audio/ogg; codecs=&quot;vorbis&quot;&#x27;).replace(/^no$/, &#x27;&#x27;)) {
                    this.ogg = true;
                }

                if (audioElement.canPlayType(&#x27;audio/ogg; codecs=&quot;opus&quot;&#x27;).replace(/^no$/, &#x27;&#x27;)) {
                    this.opus = true;
                }

                if (audioElement.canPlayType(&#x27;audio/mpeg;&#x27;).replace(/^no$/, &#x27;&#x27;)) {
                    this.mp3 = true;
                }

                // Mimetypes accepted:
                //   developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements
                //   bit.ly/iphoneoscodecs
                if (audioElement.canPlayType(&#x27;audio/wav; codecs=&quot;1&quot;&#x27;).replace(/^no$/, &#x27;&#x27;)) {
                    this.wav = true;
                }

                if (audioElement.canPlayType(&#x27;audio/x-m4a;&#x27;) || audioElement.canPlayType(&#x27;audio/aac;&#x27;).replace(/^no$/, &#x27;&#x27;)) {
                    this.m4a = true;
                }

                if (audioElement.canPlayType(&#x27;audio/webm; codecs=&quot;vorbis&quot;&#x27;).replace(/^no$/, &#x27;&#x27;)) {
                    this.webm = true;
                }
            }
        } catch (e) {
        }

    },

    /**
    * Check PixelRatio of devices.
    * @private
    */
    _checkDevice: function () {

        this.pixelRatio = window[&#x27;devicePixelRatio&#x27;] || 1;
        this.iPhone = navigator.userAgent.toLowerCase().indexOf(&#x27;iphone&#x27;) != -1;
        this.iPhone4 = (this.pixelRatio == 2 &amp;&amp; this.iPhone);
        this.iPad = navigator.userAgent.toLowerCase().indexOf(&#x27;ipad&#x27;) != -1;

    },

    /**
    * Check whether the host environment support 3D CSS.
    * @private
    */
    _checkCSS3D: function () {
        var el = document.createElement(&#x27;p&#x27;);
        var has3d;
        var transforms = {
            &#x27;webkitTransform&#x27;: &#x27;-webkit-transform&#x27;,
            &#x27;OTransform&#x27;: &#x27;-o-transform&#x27;,
            &#x27;msTransform&#x27;: &#x27;-ms-transform&#x27;,
            &#x27;MozTransform&#x27;: &#x27;-moz-transform&#x27;,
            &#x27;transform&#x27;: &#x27;transform&#x27;
        };
        // Add it to the body to get the computed style.
        document.body.insertBefore(el, null);

        for (var t in transforms) {
            if (el.style[t] !== undefined) {
                el.style[t] = &quot;translate3d(1px,1px,1px)&quot;;
                has3d = window.getComputedStyle(el).getPropertyValue(transforms[t]);
            }
        }
        document.body.removeChild(el);
        this.css3D = (has3d !== undefined &amp;&amp; has3d.length &gt; 0 &amp;&amp; has3d !== &quot;none&quot;);

    },

    canPlayAudio: function (type) {

        if (type == &#x27;mp3&#x27; &amp;&amp; this.mp3) {
            return true;
        } else if (type == &#x27;ogg&#x27; &amp;&amp; (this.ogg || this.opus)) {
            return true;
        } else if (type == &#x27;m4a&#x27; &amp;&amp; this.m4a) {
            return true;
        } else if (type == &#x27;wav&#x27; &amp;&amp; this.wav) {
            return true;
        } else if (type == &#x27;webm&#x27; &amp;&amp; this.webm) {
            return true;
        }

        return false;

    },

    isConsoleOpen: function () {

        if (window.console &amp;&amp; window.console[&#x27;firebug&#x27;]) {
            return true;
        }

        if (window.console) {
            console.profile();
            console.profileEnd();

            if (console.clear) {
                console.clear();
            }

            return console[&#x27;profiles&#x27;].length &gt; 0;
        }

        return false;

    }

};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
